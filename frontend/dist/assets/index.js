(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function W(){}function lt(t,e){for(const n in e)t[n]=e[n];return t}function Ze(t){return t()}function ze(){return Object.create(null)}function V(t){t.forEach(Ze)}function xe(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function rt(t){return Object.keys(t).length===0}function it(t,...e){if(t==null)return W;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function pe(t,e,n){t.$$.on_destroy.push(it(e,n))}function ut(t,e,n,l){if(t){const r=et(t,e,n,l);return t[0](r)}}function et(t,e,n,l){return t[1]&&l?lt(n.ctx.slice(),t[1](l(e))):n.ctx}function st(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const u=[],s=Math.max(e.dirty.length,r.length);for(let i=0;i<s;i+=1)u[i]=e.dirty[i]|r[i];return u}return e.dirty|r}return e.dirty}function ot(t,e,n,l,r,u){if(r){const s=et(e,n,l,u);t.p(s,r)}}function at(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function J(t,e,n){return t.set(n),e}function p(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function L(){return N(" ")}function Ce(){return N("")}function E(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Q(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function tt(t){return t===""?null:+t}function ct(t){return Array.from(t.childNodes)}function B(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e){t.value=e??""}function Oe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function me(t,e,n){for(let l=0;l<t.options.length;l+=1){const r=t.options[l];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ee(t){const e=t.querySelector(":checked");return e&&e.__value}let Te;function ke(t){Te=t}const ye=[],Ne=[];let we=[];const Ae=[],pt=Promise.resolve();let Ue=!1;function mt(){Ue||(Ue=!0,pt.then(nt))}function ge(t){we.push(t)}const Re=new Set;let be=0;function nt(){if(be!==0)return;const t=Te;do{try{for(;be<ye.length;){const e=ye[be];be++,ke(e),_t(e.$$)}}catch(e){throw ye.length=0,be=0,e}for(ke(null),ye.length=0,be=0;Ne.length;)Ne.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Re.has(n)||(Re.add(n),n())}we.length=0}while(ye.length);for(;Ae.length;)Ae.pop()();Ue=!1,Re.clear(),ke(t)}function _t(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ge)}}function dt(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}const Ie=new Set;let $e;function Me(){$e={r:0,c:[],p:$e}}function je(){$e.r||V($e.c),$e=$e.p}function R(t,e){t&&t.i&&(Ie.delete(t),t.i(e))}function O(t,e,n,l){if(t&&t.o){if(Ie.has(t))return;Ie.add(t),$e.c.push(()=>{Ie.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Le(t,e){O(t,1,1,()=>{e.delete(t.key)})}function Se(t,e,n,l,r,u,s,i,c,a,m,h){let _=t.length,y=u.length,g=_;const S={};for(;g--;)S[t[g].key]=g;const b=[],o=new Map,f=new Map,j=[];for(g=y;g--;){const P=h(r,u,g),T=n(P);let I=s.get(T);I?l&&j.push(()=>I.p(P,e)):(I=a(T,P),I.c()),o.set(T,b[g]=I),T in S&&f.set(T,Math.abs(g-S[T]))}const A=new Set,K=new Set;function q(P){R(P,1),P.m(i,m),s.set(P.key,P),m=P.first,y--}for(;_&&y;){const P=b[y-1],T=t[_-1],I=P.key,X=T.key;P===T?(m=P.first,_--,y--):o.has(X)?!s.has(I)||A.has(I)?q(P):K.has(X)?_--:f.get(I)>f.get(X)?(K.add(I),q(P)):(A.add(X),_--):(c(T,s),_--)}for(;_--;){const P=t[_];o.has(P.key)||c(P,s)}for(;y;)q(b[y-1]);return V(j),b}function G(t){t&&t.c()}function D(t,e,n,l){const{fragment:r,after_update:u}=t.$$;r&&r.m(e,n),l||ge(()=>{const s=t.$$.on_mount.map(Ze).filter(xe);t.$$.on_destroy?t.$$.on_destroy.push(...s):V(s),t.$$.on_mount=[]}),u.forEach(ge)}function F(t,e){const n=t.$$;n.fragment!==null&&(dt(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(ye.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,n,l,r,u,s,i=[-1]){const c=Te;ke(t);const a=t.$$={fragment:null,ctx:[],props:u,update:W,not_equal:r,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ze(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};s&&s(a.root);let m=!1;if(a.ctx=n?n(t,e.props||{},(h,_,...y)=>{const g=y.length?y[0]:_;return a.ctx&&r(a.ctx[h],a.ctx[h]=g)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](g),m&&ht(t,h)),_}):[],a.update(),m=!0,V(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const h=ct(e.target);a.fragment&&a.fragment.l(h),h.forEach(v)}else a.fragment&&a.fragment.c();e.intro&&R(t.$$.fragment),D(t,e.target,e.anchor,e.customElement),nt()}ke(c)}class re{$destroy(){F(this,1),this.$destroy=W}$on(e,n){if(!xe(n))return W;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function $t(t){let e,n,l=(t[0]?"▼ ":"► ")+t[1],r,u,s,i,c,a;const m=t[5].default,h=ut(m,t,t[4],null);return{c(){e=d("fieldset"),n=d("legend"),r=N(l),u=L(),s=d("div"),h&&h.c(),Oe(s,"display",t[0]?"inline-block":"none")},m(_,y){w(_,e,y),p(e,n),p(n,r),p(e,u),p(e,s),h&&h.m(s,null),i=!0,c||(a=[E(n,"click",t[3]),E(n,"keydown",t[2]),E(n,"keyup",t[2])],c=!0)},p(_,[y]){(!i||y&3)&&l!==(l=(_[0]?"▼ ":"► ")+_[1])&&B(r,l),h&&h.p&&(!i||y&16)&&ot(h,m,_,_[4],i?st(m,_[4],y,null):at(_[4]),null),y&1&&Oe(s,"display",_[0]?"inline-block":"none")},i(_){i||(R(h,_),i=!0)},o(_){O(h,_),i=!1},d(_){_&&v(e),h&&h.d(_),c=!1,V(a)}}}function gt(t,e,n){let{$$slots:l={},$$scope:r}=e,{name:u}=e,{open:s=!0}=e;const i=()=>{},c=()=>{n(0,s=!s)};return t.$$set=a=>{"name"in a&&n(1,u=a.name),"open"in a&&n(0,s=a.open),"$$scope"in a&&n(4,r=a.$$scope)},[s,u,i,c,r,l]}class Pe extends re{constructor(e){super(),le(this,e,gt,$t,Z,{name:1,open:0})}}const ve=[];function bt(t,e=W){let n;const l=new Set;function r(i){if(Z(t,i)&&(t=i,n)){const c=!ve.length;for(const a of l)a[1](),ve.push(a,t);if(c){for(let a=0;a<ve.length;a+=2)ve[a][0](ve[a+1]);ve.length=0}}}function u(i){r(i(t))}function s(i,c=W){const a=[i,c];return l.add(a),l.size===1&&(n=e(r)||W),i(t),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:s}}const U=bt({stats:[],characters:[],parts:[],weapon:null});function vt(t){let e,n,l,r,u,s;return{c(){e=d("li"),n=N(t[0]),l=L(),r=d("form"),r.innerHTML='<input type="submit" value="remove"/>',k(r,"method","get")},m(i,c){w(i,e,c),p(e,n),p(e,l),p(e,r),u||(s=E(r,"submit",Q(t[1])),u=!0)},p(i,[c]){c&1&&B(n,i[0])},i:W,o:W,d(i){i&&v(e),u=!1,s()}}}function yt(t,e,n){let l;pe(t,U,s=>n(2,l=s));let{name:r}=e;const u=async()=>{let s=await fetch(`/api/character/remove/${encodeURI(r)}`);s.status==200&&J(U,l=await s.json(),l)};return t.$$set=s=>{"name"in s&&n(0,r=s.name)},[r,u]}class wt extends re{constructor(e){super(),le(this,e,yt,vt,Z,{name:0})}}function qe(t,e,n){const l=t.slice();return l[4]=e[n],l}function He(t,e){let n,l,r;return l=new wt({props:{name:e[4].name}}),{key:t,first:null,c(){n=Ce(),G(l.$$.fragment),this.first=n},m(u,s){w(u,n,s),D(l,u,s),r=!0},p(u,s){e=u;const i={};s&2&&(i.name=e[4].name),l.$set(i)},i(u){r||(R(l.$$.fragment,u),r=!0)},o(u){O(l.$$.fragment,u),r=!1},d(u){u&&v(n),F(l,u)}}}function kt(t){let e,n=[],l=new Map,r,u,s,i,c,a,m,h,_,y,g=t[1].characters;const S=b=>b[4].name;for(let b=0;b<g.length;b+=1){let o=qe(t,g,b),f=S(o);l.set(f,n[b]=He(f,o))}return{c(){e=d("ul");for(let b=0;b<n.length;b+=1)n[b].c();r=L(),u=d("hr"),s=L(),i=d("form"),c=d("input"),a=L(),m=d("input"),k(c,"type","submit"),c.value="add",k(m,"type","text"),k(m,"name","name"),k(m,"placeholder","name"),k(m,"size","16"),k(i,"method","get")},m(b,o){w(b,e,o);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);w(b,r,o),w(b,u,o),w(b,s,o),w(b,i,o),p(i,c),p(i,a),p(i,m),Y(m,t[0]),h=!0,_||(y=[E(m,"input",t[3]),E(i,"submit",Q(t[2]))],_=!0)},p(b,o){o&2&&(g=b[1].characters,Me(),n=Se(n,o,S,1,b,g,l,e,Le,He,null,qe),je()),o&1&&m.value!==b[0]&&Y(m,b[0])},i(b){if(!h){for(let o=0;o<g.length;o+=1)R(n[o]);h=!0}},o(b){for(let o=0;o<n.length;o+=1)O(n[o]);h=!1},d(b){b&&v(e);for(let o=0;o<n.length;o+=1)n[o].d();b&&v(r),b&&v(u),b&&v(s),b&&v(i),_=!1,V(y)}}}function Ct(t){let e,n;return e=new Pe({props:{name:"Character",$$slots:{default:[kt]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(l,r){D(e,l,r),n=!0},p(l,[r]){const u={};r&131&&(u.$$scope={dirty:r,ctx:l}),e.$set(u)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Mt(t,e,n){let l;pe(t,U,i=>n(1,l=i));let r="";const u=async()=>{let i=await fetch("/api/character/new?"+new URLSearchParams({name:r}));i.status==200&&J(U,l=await i.json(),l)};function s(){r=this.value,n(0,r)}return[r,l,u,s]}class jt extends re{constructor(e){super(),le(this,e,Mt,Ct,Z,{})}}function Lt(t){let e,n,l,r,u;return{c(){e=d("form"),n=d("input"),k(n,"type","checkbox"),k(n,"name","toggle"),n.value=l=t[0].value,k(e,"method","get")},m(s,i){w(s,e,i),p(e,n),r||(u=[E(n,"change",Q(t[3])),E(e,"submit",Q(t[3]))],r=!0)},p(s,i){i&1&&l!==(l=s[0].value)&&(n.value=l)},d(s){s&&v(e),r=!1,V(u)}}}function St(t){let e,n=t[0].value+"",l,r,u,s;return{c(){e=d("form"),e.innerHTML='<input type="submit" value="+"/>',l=N(n),r=d("form"),r.innerHTML='<input type="submit" value="-"/>',k(e,"method","get"),k(r,"method","get")},m(i,c){w(i,e,c),w(i,l,c),w(i,r,c),u||(s=[E(e,"submit",Q(t[1])),E(r,"submit",Q(t[2]))],u=!0)},p(i,c){c&1&&n!==(n=i[0].value+"")&&B(l,n)},d(i){i&&v(e),i&&v(l),i&&v(r),u=!1,V(s)}}}function Pt(t){let e,n,l,r=t[0].name+"",u,s,i;function c(h,_){if(h[0].type=="number")return St;if(h[0].type=="boolean")return Lt}let a=c(t),m=a&&a(t);return{c(){e=d("tr"),n=d("td"),l=d("var"),u=N(r),s=L(),i=d("td"),m&&m.c(),k(i,"class","text-right")},m(h,_){w(h,e,_),p(e,n),p(n,l),p(l,u),p(e,s),p(e,i),m&&m.m(i,null)},p(h,[_]){_&1&&r!==(r=h[0].name+"")&&B(u,r),a===(a=c(h))&&m?m.p(h,_):(m&&m.d(1),m=a&&a(h),m&&(m.c(),m.m(i,null)))},i:W,o:W,d(h){h&&v(e),m&&m.d()}}}function Et(t,e,n){let l;pe(t,U,a=>n(5,l=a));let{character:r}=e,{stat:u}=e;const s=async()=>{let a=await fetch(`/api/character/increment/${encodeURI(r.name)}/${encodeURI(u.name)}`);a.status==200&&J(U,l=await a.json(),l)},i=async()=>{let a=await fetch(`/api/character/decrement/${encodeURI(r.name)}/${encodeURI(u.name)}`);a.status==200&&J(U,l=await a.json(),l)},c=async()=>{let a=await fetch(`/api/character/toggle/${encodeURI(r.name)}/${encodeURI(u.name)}`);a.status==200&&J(U,l=await a.json(),l)};return t.$$set=a=>{"character"in a&&n(4,r=a.character),"stat"in a&&n(0,u=a.stat)},[u,s,i,c,r]}class It extends re{constructor(e){super(),le(this,e,Et,Pt,Z,{character:4,stat:0})}}function Be(t,e,n){const l=t.slice();return l[1]=e[n],l}function De(t,e){let n,l,r;return l=new It({props:{character:e[0],stat:e[1]}}),{key:t,first:null,c(){n=Ce(),G(l.$$.fragment),this.first=n},m(u,s){w(u,n,s),D(l,u,s),r=!0},p(u,s){e=u;const i={};s&1&&(i.character=e[0]),s&1&&(i.stat=e[1]),l.$set(i)},i(u){r||(R(l.$$.fragment,u),r=!0)},o(u){O(l.$$.fragment,u),r=!1},d(u){u&&v(n),F(l,u)}}}function Rt(t){let e,n=[],l=new Map,r,u=t[0].stats;const s=i=>i[1].name;for(let i=0;i<u.length;i+=1){let c=Be(t,u,i),a=s(c);l.set(a,n[i]=De(a,c))}return{c(){e=d("table");for(let i=0;i<n.length;i+=1)n[i].c()},m(i,c){w(i,e,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(i,c){c&1&&(u=i[0].stats,Me(),n=Se(n,c,s,1,i,u,l,e,Le,De,null,Be),je())},i(i){if(!r){for(let c=0;c<u.length;c+=1)R(n[c]);r=!0}},o(i){for(let c=0;c<n.length;c+=1)O(n[c]);r=!1},d(i){i&&v(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function Ut(t){let e,n;return e=new Pe({props:{name:t[0].name,$$slots:{default:[Rt]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(l,r){D(e,l,r),n=!0},p(l,[r]){const u={};r&1&&(u.name=l[0].name),r&17&&(u.$$scope={dirty:r,ctx:l}),e.$set(u)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Tt(t,e,n){let{character:l}=e;return t.$$set=r=>{"character"in r&&n(0,l=r.character)},[l]}class zt extends re{constructor(e){super(),le(this,e,Tt,Ut,Z,{character:0})}}function Ot(t){let e,n,l=t[0].name+"",r,u,s,i=t[0].details+"",c,a,m,h,_,y,g,S,b;return{c(){e=d("li"),n=d("var"),r=N(l),u=N(" - "),s=d("var"),c=N(i),a=L(),m=d("input"),_=d("input"),g=d("form"),g.innerHTML='<input type="submit" value="remove"/>',k(m,"type","button"),m.value=h=t[0].type,k(_,"type","button"),_.value=y=t[0].rarity,k(g,"method","get")},m(o,f){w(o,e,f),p(e,n),p(n,r),p(e,u),p(e,s),p(s,c),p(e,a),p(e,m),p(e,_),p(e,g),S||(b=E(g,"submit",Q(t[1])),S=!0)},p(o,[f]){f&1&&l!==(l=o[0].name+"")&&B(r,l),f&1&&i!==(i=o[0].details+"")&&B(c,i),f&1&&h!==(h=o[0].type)&&(m.value=h),f&1&&y!==(y=o[0].rarity)&&(_.value=y)},i:W,o:W,d(o){o&&v(e),S=!1,b()}}}function Nt(t,e,n){let l;pe(t,U,s=>n(2,l=s));let{part:r}=e;const u=async()=>{let s=await fetch(`/api/weapon/part/remove/${encodeURI(r.name)}`);s.status==200&&J(U,l=await s.json(),l)};return t.$$set=s=>{"part"in s&&n(0,r=s.part)},[r,u]}class At extends re{constructor(e){super(),le(this,e,Nt,Ot,Z,{part:0})}}function Fe(t,e,n){const l=t.slice();return l[5]=e[n],l}function We(t,e){let n,l,r;return l=new At({props:{part:e[5]}}),{key:t,first:null,c(){n=Ce(),G(l.$$.fragment),this.first=n},m(u,s){w(u,n,s),D(l,u,s),r=!0},p(u,s){e=u;const i={};s&16&&(i.part=e[5]),l.$set(i)},i(u){r||(R(l.$$.fragment,u),r=!0)},o(u){O(l.$$.fragment,u),r=!1},d(u){u&&v(n),F(l,u)}}}function qt(t){let e,n=[],l=new Map,r,u,s,i,c,a,m,h,_,y,g,S,b,o,f,j,A,K,q,P,T,I,X,H,oe,x,ie,ee,te,ue,_e,ae,de,ne,fe,he,ce,z=t[4].parts;const M=$=>$[5].name+$[5].type+$[5].rarity;for(let $=0;$<z.length;$+=1){let C=Fe(t,z,$),se=M(C);l.set(se,n[$]=We(se,C))}return{c(){e=d("ul");for(let $=0;$<n.length;$+=1)n[$].c();r=L(),u=d("hr"),s=L(),i=d("form"),c=d("input"),a=L(),m=d("input"),h=L(),_=d("input"),y=L(),g=d("select"),S=d("option"),S.textContent="body",b=d("option"),b.textContent="barrel",o=d("option"),o.textContent="magazine",f=d("option"),f.textContent="stock",j=L(),A=d("select"),K=d("option"),K.textContent="common",q=d("option"),q.textContent="uncommon",P=d("option"),P.textContent="rare",T=d("option"),T.textContent="legendary",I=d("option"),I.textContent="unique",X=L(),H=d("select"),oe=d("option"),oe.textContent="Arksys Inc",x=d("option"),x.textContent="Dikarum & Sons",ie=d("option"),ie.textContent="Pecora Group",ee=d("option"),ee.textContent="Sisterhood of Blight",te=d("option"),te.textContent="Theia Manufacturing",ue=d("option"),ue.textContent="West Field Mining Munitions",_e=L(),ae=d("br"),de=L(),ne=d("form"),ne.innerHTML='<input type="submit" value="init"/>',k(c,"type","submit"),c.value="add",k(m,"type","text"),k(m,"name","name"),k(m,"placeholder","name"),k(m,"size","16"),k(_,"type","text"),k(_,"name","details"),k(_,"placeholder","details"),k(_,"size","16"),S.__value="body",S.value=S.__value,b.__value="barrel",b.value=b.__value,o.__value="magazine",o.value=o.__value,f.__value="stock",f.value=f.__value,k(g,"name","part"),t[5]===void 0&&ge(()=>t[10].call(g)),K.__value="common",K.value=K.__value,q.__value="uncommon",q.value=q.__value,P.__value="rare",P.value=P.__value,T.__value="legendary",T.value=T.__value,I.__value="unique",I.value=I.__value,k(A,"name","rarity"),t[2]===void 0&&ge(()=>t[11].call(A)),oe.__value="arksys",oe.value=oe.__value,x.__value="dikarum",x.value=x.__value,ie.__value="pecora",ie.value=ie.__value,ee.__value="sisterhood",ee.value=ee.__value,te.__value="theia",te.value=te.__value,ue.__value="west_field",ue.value=ue.__value,k(H,"name","company"),t[3]===void 0&&ge(()=>t[12].call(H)),k(i,"method","get"),k(ne,"method","get")},m($,C){w($,e,C);for(let se=0;se<n.length;se+=1)n[se]&&n[se].m(e,null);w($,r,C),w($,u,C),w($,s,C),w($,i,C),p(i,c),p(i,a),p(i,m),Y(m,t[0]),p(i,h),p(i,_),Y(_,t[1]),p(i,y),p(i,g),p(g,S),p(g,b),p(g,o),p(g,f),me(g,t[5],!0),p(i,j),p(i,A),p(A,K),p(A,q),p(A,P),p(A,T),p(A,I),me(A,t[2],!0),p(i,X),p(i,H),p(H,oe),p(H,x),p(H,ie),p(H,ee),p(H,te),p(H,ue),me(H,t[3],!0),w($,_e,C),w($,ae,C),w($,de,C),w($,ne,C),fe=!0,he||(ce=[E(m,"input",t[8]),E(_,"input",t[9]),E(g,"change",t[10]),E(A,"change",t[11]),E(H,"change",t[12]),E(i,"submit",Q(t[6])),E(ne,"submit",Q(t[7]))],he=!0)},p($,C){C&16&&(z=$[4].parts,Me(),n=Se(n,C,M,1,$,z,l,e,Le,We,null,Fe),je()),C&1&&m.value!==$[0]&&Y(m,$[0]),C&2&&_.value!==$[1]&&Y(_,$[1]),C&32&&me(g,$[5]),C&4&&me(A,$[2]),C&8&&me(H,$[3])},i($){if(!fe){for(let C=0;C<z.length;C+=1)R(n[C]);fe=!0}},o($){for(let C=0;C<n.length;C+=1)O(n[C]);fe=!1},d($){$&&v(e);for(let C=0;C<n.length;C+=1)n[C].d();$&&v(r),$&&v(u),$&&v(s),$&&v(i),$&&v(_e),$&&v(ae),$&&v(de),$&&v(ne),he=!1,V(ce)}}}function Ht(t){let e,n;return e=new Pe({props:{name:"Parts",open:!1,$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(l,r){D(e,l,r),n=!0},p(l,[r]){const u={};r&32831&&(u.$$scope={dirty:r,ctx:l}),e.$set(u)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Bt(t,e,n){let l;pe(t,U,b=>n(4,l=b));let r="",u="",s="",i="",c="";const a=async()=>{let b=await fetch("/api/weapon/part/new?"+new URLSearchParams({name:r,details:u,part:s,rarity:i,company:c}));b.status==200&&(J(U,l=await b.json(),l),n(0,r=""),n(1,u=""),n(5,s=""),n(2,i=""),n(3,c=""))},m=async()=>{let b=await fetch("/api/weapon/part/init");b.status==200&&J(U,l=await b.json(),l)};function h(){r=this.value,n(0,r)}function _(){u=this.value,n(1,u)}function y(){s=Ee(this),n(5,s)}function g(){i=Ee(this),n(2,i)}function S(){c=Ee(this),n(3,c)}return[r,u,i,c,l,s,a,m,h,_,y,g,S]}class Dt extends re{constructor(e){super(),le(this,e,Bt,Ht,Z,{})}}function Ft(t){let e;return{c(){e=d("input"),k(e,"type","button"),e.value="boolean"},m(n,l){w(n,e,l)},d(n){n&&v(e)}}}function Wt(t){let e;return{c(){e=d("input"),k(e,"type","button"),e.value="number"},m(n,l){w(n,e,l)},d(n){n&&v(e)}}}function Gt(t){let e,n,l=t[0].name+"",r,u,s,i,c,a;function m(y,g){if(y[0].type=="number")return Wt;if(y[0].type=="boolean")return Ft}let h=m(t),_=h&&h(t);return{c(){e=d("form"),n=d("var"),r=N(l),u=L(),_&&_.c(),s=L(),i=d("input"),k(i,"type","submit"),i.value="remove",k(e,"method","get")},m(y,g){w(y,e,g),p(e,n),p(n,r),p(e,u),_&&_.m(e,null),p(e,s),p(e,i),c||(a=E(e,"submit",Q(t[1])),c=!0)},p(y,[g]){g&1&&l!==(l=y[0].name+"")&&B(r,l),h!==(h=m(y))&&(_&&_.d(1),_=h&&h(y),_&&(_.c(),_.m(e,s)))},i:W,o:W,d(y){y&&v(e),_&&_.d(),c=!1,a()}}}function Kt(t,e,n){let l;pe(t,U,s=>n(2,l=s));let{stat:r}=e;const u=async()=>{let s=await fetch(`/api/stat/remove/${encodeURI(r.name)}`);s.status==200&&J(U,l=await s.json(),l)};return t.$$set=s=>{"stat"in s&&n(0,r=s.stat)},[r,u]}class Jt extends re{constructor(e){super(),le(this,e,Kt,Gt,Z,{stat:0})}}function Ge(t,e,n){const l=t.slice();return l[6]=e[n],l}function Ke(t,e){let n,l,r,u,s;return l=new Jt({props:{stat:e[6]}}),{key:t,first:null,c(){n=Ce(),G(l.$$.fragment),r=L(),u=d("hr"),this.first=n},m(i,c){w(i,n,c),D(l,i,c),w(i,r,c),w(i,u,c),s=!0},p(i,c){e=i;const a={};c&4&&(a.stat=e[6]),l.$set(a)},i(i){s||(R(l.$$.fragment,i),s=!0)},o(i){O(l.$$.fragment,i),s=!1},d(i){i&&v(n),F(l,i),i&&v(r),i&&v(u)}}}function Qt(t){let e,n=[],l=new Map,r,u,s,i,c,a,m,h,_,y,g,S=t[2].stats;const b=o=>o[6].name;for(let o=0;o<S.length;o+=1){let f=Ge(t,S,o),j=b(f);l.set(j,n[o]=Ke(j,f))}return{c(){e=d("form");for(let o=0;o<n.length;o+=1)n[o].c();r=L(),u=d("input"),s=L(),i=d("input"),c=L(),a=d("select"),m=d("option"),m.textContent="number",h=d("option"),h.textContent="boolean",k(u,"type","submit"),u.value="add",k(i,"type","text"),k(i,"name","name"),k(i,"placeholder","name"),k(i,"size","16"),m.__value="number",m.value=m.__value,h.__value="boolean",h.value=h.__value,k(a,"name","type"),t[1]===void 0&&ge(()=>t[5].call(a)),k(e,"method","get")},m(o,f){w(o,e,f);for(let j=0;j<n.length;j+=1)n[j]&&n[j].m(e,null);p(e,r),p(e,u),p(e,s),p(e,i),Y(i,t[0]),p(e,c),p(e,a),p(a,m),p(a,h),me(a,t[1],!0),_=!0,y||(g=[E(i,"input",t[4]),E(a,"change",t[5]),E(e,"submit",Q(t[3]))],y=!0)},p(o,f){f&4&&(S=o[2].stats,Me(),n=Se(n,f,b,1,o,S,l,e,Le,Ke,r,Ge),je()),f&1&&i.value!==o[0]&&Y(i,o[0]),f&2&&me(a,o[1])},i(o){if(!_){for(let f=0;f<S.length;f+=1)R(n[f]);_=!0}},o(o){for(let f=0;f<n.length;f+=1)O(n[f]);_=!1},d(o){o&&v(e);for(let f=0;f<n.length;f+=1)n[f].d();y=!1,V(g)}}}function Vt(t){let e,n;return e=new Pe({props:{name:"Template",$$slots:{default:[Qt]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(l,r){D(e,l,r),n=!0},p(l,[r]){const u={};r&519&&(u.$$scope={dirty:r,ctx:l}),e.$set(u)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Xt(t,e,n){let l;pe(t,U,a=>n(2,l=a));let r="",u="";const s=async()=>{let a=await fetch("/api/stat/new?"+new URLSearchParams({name:r,type:u}));a.status==200&&(J(U,l=await a.json(),l),n(0,r=""),n(1,u=""))};function i(){r=this.value,n(0,r)}function c(){u=Ee(this),n(1,u)}return[r,u,l,s,i,c]}class Yt extends re{constructor(e){super(),le(this,e,Xt,Vt,Z,{})}}function Je(t,e,n){const l=t.slice();return l[7]=e[n],l}function Qe(t){let e,n,l=t[2].weapon.level+"",r,u,s=t[2].weapon.rarity+"",i,c,a=t[2].weapon.type+"",m,h,_,y,g=t[2].weapon.name+"",S,b,o,f,j=t[2].weapon.company+"",A,K,q,P,T,I,X=t[2].weapon.damage+"",H,oe,x,ie,ee,te=t[2].weapon.range+"",ue,_e,ae,de,ne,fe=t[2].weapon.id+"",he,ce=t[2].weapon.details,z=[];for(let M=0;M<ce.length;M+=1)z[M]=Ve(Je(t,ce,M));return{c(){e=d("p"),n=N("lvl "),r=N(l),u=L(),i=N(s),c=L(),m=N(a),h=L(),_=d("p"),y=d("b"),S=N(g),b=L(),o=d("p"),f=d("b"),A=N(j),K=L(),q=d("table"),P=d("tr"),T=d("td"),T.textContent="damage",I=d("td"),H=N(X),oe=L(),x=d("tr"),ie=d("td"),ie.textContent="range",ee=d("td"),ue=N(te),_e=L(),ae=d("ul");for(let M=0;M<z.length;M+=1)z[M].c();de=L(),ne=d("var"),he=N(fe),k(I,"class","text-right"),k(ee,"class","text-right")},m(M,$){w(M,e,$),p(e,n),p(e,r),p(e,u),p(e,i),p(e,c),p(e,m),w(M,h,$),w(M,_,$),p(_,y),p(y,S),w(M,b,$),w(M,o,$),p(o,f),p(f,A),w(M,K,$),w(M,q,$),p(q,P),p(P,T),p(P,I),p(I,H),p(q,oe),p(q,x),p(x,ie),p(x,ee),p(ee,ue),w(M,_e,$),w(M,ae,$);for(let C=0;C<z.length;C+=1)z[C]&&z[C].m(ae,null);w(M,de,$),w(M,ne,$),p(ne,he)},p(M,$){if($&4&&l!==(l=M[2].weapon.level+"")&&B(r,l),$&4&&s!==(s=M[2].weapon.rarity+"")&&B(i,s),$&4&&a!==(a=M[2].weapon.type+"")&&B(m,a),$&4&&g!==(g=M[2].weapon.name+"")&&B(S,g),$&4&&j!==(j=M[2].weapon.company+"")&&B(A,j),$&4&&X!==(X=M[2].weapon.damage+"")&&B(H,X),$&4&&te!==(te=M[2].weapon.range+"")&&B(ue,te),$&4){ce=M[2].weapon.details;let C;for(C=0;C<ce.length;C+=1){const se=Je(M,ce,C);z[C]?z[C].p(se,$):(z[C]=Ve(se),z[C].c(),z[C].m(ae,null))}for(;C<z.length;C+=1)z[C].d(1);z.length=ce.length}$&4&&fe!==(fe=M[2].weapon.id+"")&&B(he,fe)},d(M){M&&v(e),M&&v(h),M&&v(_),M&&v(b),M&&v(o),M&&v(K),M&&v(q),M&&v(_e),M&&v(ae),ft(z,M),M&&v(de),M&&v(ne)}}}function Ve(t){let e,n=t[7]+"",l;return{c(){e=d("li"),l=N(n)},m(r,u){w(r,e,u),p(e,l)},p(r,u){u&4&&n!==(n=r[7]+"")&&B(l,n)},d(r){r&&v(e)}}}function Zt(t){let e,n,l,r,u,s,i,c,a,m,h,_,y,g,S,b,o=t[2].weapon&&Qe(t);return{c(){o&&o.c(),e=L(),n=d("hr"),l=L(),r=d("form"),u=d("input"),s=L(),i=d("input"),c=L(),a=d("br"),m=L(),h=d("form"),_=d("input"),y=L(),g=d("input"),k(u,"type","submit"),u.value="build",k(i,"type","text"),k(i,"name","id"),k(i,"placeholder","000:000:000:000:000:000"),k(i,"size","23"),k(r,"method","get"),k(_,"type","submit"),_.value="generate",k(g,"type","number"),k(g,"name","level"),k(g,"size","8"),k(h,"method","get")},m(f,j){o&&o.m(f,j),w(f,e,j),w(f,n,j),w(f,l,j),w(f,r,j),p(r,u),p(r,s),p(r,i),Y(i,t[0]),w(f,c,j),w(f,a,j),w(f,m,j),w(f,h,j),p(h,_),p(h,y),p(h,g),Y(g,t[1]),S||(b=[E(i,"input",t[5]),E(r,"submit",Q(t[3])),E(g,"input",t[6]),E(h,"submit",Q(t[4]))],S=!0)},p(f,j){f[2].weapon?o?o.p(f,j):(o=Qe(f),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),j&1&&i.value!==f[0]&&Y(i,f[0]),j&2&&tt(g.value)!==f[1]&&Y(g,f[1])},d(f){o&&o.d(f),f&&v(e),f&&v(n),f&&v(l),f&&v(r),f&&v(c),f&&v(a),f&&v(m),f&&v(h),S=!1,V(b)}}}function xt(t){let e,n;return e=new Pe({props:{name:"Weapon",$$slots:{default:[Zt]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(l,r){D(e,l,r),n=!0},p(l,[r]){const u={};r&1031&&(u.$$scope={dirty:r,ctx:l}),e.$set(u)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){O(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function en(t,e,n){let l;pe(t,U,m=>n(2,l=m));let r="",u=1;const s=async()=>{let m=await fetch("/api/weapon/build?"+new URLSearchParams({id:r}));m.status==200&&(J(U,l=await m.json(),l),n(0,r=""))},i=async()=>{let m=await fetch("/api/weapon/generate?"+new URLSearchParams({level:u.toString()}));m.status==200&&(J(U,l=await m.json(),l),n(1,u=1))};function c(){r=this.value,n(0,r)}function a(){u=tt(this.value),n(1,u)}return[r,u,l,s,i,c,a]}class tn extends re{constructor(e){super(),le(this,e,en,xt,Z,{})}}function Xe(t,e,n){const l=t.slice();return l[1]=e[n],l}function Ye(t,e){let n,l,r;return l=new zt({props:{character:e[1]}}),{key:t,first:null,c(){n=Ce(),G(l.$$.fragment),this.first=n},m(u,s){w(u,n,s),D(l,u,s),r=!0},p(u,s){e=u;const i={};s&1&&(i.character=e[1]),l.$set(i)},i(u){r||(R(l.$$.fragment,u),r=!0)},o(u){O(l.$$.fragment,u),r=!1},d(u){u&&v(n),F(l,u)}}}function nn(t){let e,n,l,r,u,s,i=[],c=new Map,a,m,h,_,y,g;n=new Yt({}),r=new jt({});let S=t[0].characters;const b=o=>o[1].name;for(let o=0;o<S.length;o+=1){let f=Xe(t,S,o),j=b(f);c.set(j,i[o]=Ye(j,f))}return h=new tn({}),y=new Dt({}),{c(){e=d("div"),G(n.$$.fragment),l=L(),G(r.$$.fragment),u=L(),s=d("div");for(let o=0;o<i.length;o+=1)i[o].c();a=L(),m=d("div"),G(h.$$.fragment),_=L(),G(y.$$.fragment),k(e,"class","column"),k(s,"class","column"),k(m,"class","column")},m(o,f){w(o,e,f),D(n,e,null),p(e,l),D(r,e,null),w(o,u,f),w(o,s,f);for(let j=0;j<i.length;j+=1)i[j]&&i[j].m(s,null);w(o,a,f),w(o,m,f),D(h,m,null),p(m,_),D(y,m,null),g=!0},p(o,[f]){f&1&&(S=o[0].characters,Me(),i=Se(i,f,b,1,o,S,c,s,Le,Ye,null,Xe),je())},i(o){if(!g){R(n.$$.fragment,o),R(r.$$.fragment,o);for(let f=0;f<S.length;f+=1)R(i[f]);R(h.$$.fragment,o),R(y.$$.fragment,o),g=!0}},o(o){O(n.$$.fragment,o),O(r.$$.fragment,o);for(let f=0;f<i.length;f+=1)O(i[f]);O(h.$$.fragment,o),O(y.$$.fragment,o),g=!1},d(o){o&&v(e),F(n),F(r),o&&v(u),o&&v(s);for(let f=0;f<i.length;f+=1)i[f].d();o&&v(a),o&&v(m),F(h),F(y)}}}function ln(t,e,n){let l;return pe(t,U,r=>n(0,l=r)),(async()=>{let r=await fetch("/api/state");r.status==200&&J(U,l=await r.json(),l)})(),[l]}class rn extends re{constructor(e){super(),le(this,e,ln,nn,Z,{})}}new rn({target:document.getElementById("app")});
